<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mammogram CAD â€“ CV-Based Detection</title>

<style>
body {
  background: linear-gradient(135deg, #020617, #020617);
  color: #e5e7eb;
  font-family: system-ui, sans-serif;
  margin: 0;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px;
}

h1 {
  font-size: 2.4rem;
  margin-bottom: 10px;
}

.subtitle {
  color: #94a3b8;
  margin-bottom: 30px;
}

.upload-box {
  border: 2px dashed #38bdf8;
  border-radius: 18px;
  padding: 40px;
  text-align: center;
  cursor: pointer;
  transition: 0.3s;
}

.upload-box:hover {
  background: rgba(56,189,248,0.1);
}

button {
  background: linear-gradient(135deg, #38bdf8, #0ea5e9);
  border: none;
  padding: 14px 26px;
  border-radius: 14px;
  font-size: 16px;
  color: #020617;
  cursor: pointer;
  margin-top: 20px;
}

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  margin-top: 40px;
}

.card {
  background: #020617;
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 0 20px rgba(56,189,248,0.15);
}

img {
  width: 100%;
  border-radius: 12px;
  margin-bottom: 10px;
}

.badge {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
}

.low {
  background: rgba(34,197,94,0.15);
  color: #22c55e;
}

.moderate {
  background: rgba(250,204,21,0.15);
  color: #facc15;
}

.high {
  background: rgba(239,68,68,0.15);
  color: #ef4444;
}

.meta {
  font-size: 14px;
  color: #94a3b8;
  margin-top: 6px;
}
</style>
</head>

<body>
<div class="container">
  <h1>ðŸ©º Mammogram CAD System</h1>
  <p class="subtitle">
    Classical Computer Visionâ€“based detection of suspicious dense regions.
    <br>No AI models. No training. Fully explainable.
  </p>

  <!-- Upload Form -->
  <form method="POST" enctype="multipart/form-data">
    <input
      type="file"
      name="files"
      multiple
      hidden
      id="fileInput"
      accept="image/*"
    >

    <div class="upload-box" onclick="document.getElementById('fileInput').click()">
      Click or Drag & Drop Mammograms
    </div>

    <button type="button" onclick="analyze()">Analyze Mammograms</button>
  </form>

  <!-- Results -->
  {% if results %}
  <div class="gallery">
    {% for r in results %}
    <div class="card">
      <img src="{{ r.processed_image }}" alt="Processed Mammogram">

      <div class="meta">
        <strong>{{ r.filename }}</strong><br>
        Regions detected: {{ r.regions }}
      </div>

      <span class="badge
        {% if r.risk == 'High' %}high
        {% elif r.risk == 'Moderate' %}moderate
        {% else %}low{% endif %}
      ">
        Risk: {{ r.risk }}
      </span>
    </div>
    {% endfor %}
  </div>
  {% endif %}

</div>
</body>
</html>
